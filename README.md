# Проектная работа "Веб-ларек"

Стек: HTML, SCSS, TS, Webpack

Структура проекта:
- src/ — исходные файлы проекта
- src/components/ — папка с JS компонентами
- src/components/base/ — папка с базовым кодом

Важные файлы:
- src/pages/index.html — HTML-файл главной страницы
- src/types/index.ts — файл с типами
- src/index.ts — точка входа приложения
- src/scss/styles.scss — корневой файл стилей
- src/utils/constants.ts — файл с константами
- src/utils/utils.ts — файл с утилитами

## Установка и запуск
Для установки и запуска проекта необходимо выполнить команды

```
npm install
npm run start
```

или

```
yarn
yarn start
```
## Сборка

```
npm run build
```

или

```
yarn build
```

# Базовый код:

## Класс API:

Базовый класс для получения и отправления запросов.

- baseUrl — базовый URL для запросов к API. 
- options — объект с настройками запроса, включая заголовки. 
- handleResponse — защищённый метод, который обрабатывает ответ от сервера и возвращает Promise. 
- Метод get() - выполняет GET-запроса к серверу.
- Метод post()- выполняет  POST-запроса с данными.

## Класс Component:

Абстрактный класс предназначенный для создания других компонентов.

 - toggleClass — метод для переключения класса CSS у элемента. 
 - setText — метод для установки текста у элемента. 
 - setDisabled — метод для управления отключением элемента. 
 - setHidden — метод для скрытия элемента. 
 - setVisible — метод для отображения элемента. 
 - setImage — метод для изменения источника и альтернативного текста у изображения.
 - render - метод для рендера состояния компонента на основе переданных данных.

## Класс EventEmitter:

Базовый класс, обеспечивает работу событий. Устанавливает и снимает слушателей событий, вызывает слушателей при возникновении события.

 - _events — приватное свойство, которое хранит карту событий. 
 - on — метод для подписки на событие.
 - off — метод для отписки события. 
 - emit — метод для отправки события. 
 - onAll - функция для на все события.
 - offAll - очищает все зарегистрированные обработчики событий.
 - trigger — метод, который возвращает функцию для запуска события с данными контекста.

## Класс Model:

Абстрактный класс, который используется для создания моделей объектов.

- emitChanges — метод для отправки события, связанного с изменениями объекта.

# Общие классы

## Класс Basket:

Представляет собой корзину товаров с возможностью отображения списка товаров и общей стоимости.

Поля:
- protected _list: элемент HTML, представляющий список товаров.
- protected _price: элемент HTML для отображения общей стоимости товаров.
- protected _button: кнопка для открытия заказа.

Методы: 
- items - обновялет список товаров заменяя содержимое элемента _list. Также метод проверяет количество товаров и включает или отключает кнопку на основе этого количества.
- total - обновялет общую стоимость товаров в корзине.

## Класс Form:

Представляет собой форму для ввода данных с возможностью проверки правильности ввода и отображения ошибок.

Поля:
- protected _submit: элемент HTML, представляющий кнопку отправки формы. 
- protected _errors: элемент HTML для отображения сообщений об ошибках.

Методы:

- onInputChange - обрабатывает изменение значения поля формы и генерирует событие с данными об изменении.
- valid - определяет, является ли форма корректной для отправки. 
- errors - устанавливает значение ошибки. 
- render - обновляет компонент формы, используя переданное состояние.

## Класс Modal:

Представляет собой модальное окно с возможностью отображения контента и закрытия по клику на кнопку или вне окна.

Поля:
- content: элемент HTML, представляющий контент модального окна.
- protected _closeButton: кнопка для закрытия модального окна по клику.
- protected _content: элемент HTML для отображения контента.

Методы:
- сontent - обновляет содержимое элемента.
- open и close - используются для отображения и скрытия модального окна соответственно.

## Класс Success

Представляет собой компонент для отображения успешной операции с возможностью отображения суммы списания.

Поля:
- protected _description: элемент HTML, представляющий описание успешной операции.
- protected _close: кнопка для закрытия компонента. 

Метод:
- total - отображает итоговую сумму заказа.


# Остальной код:

## Класс AppData:

Хранит массив продуктов, корзину, данные о заказе. Добавляет и удаляет товары из корзины, устанавливает данные заказа и отображает товар в модальном окне.

Поля:
- items: массив продуктов.
- order: данные заказа. 
- formErrors: массив ошибок формы. 
- basket: корзина. 
- openCard: товар, который открыт в данный момент.

Методы:

- setItems -  меняет массив товаров на переданный.
- getItems - проверяет, есть ли товар в корзине.
- setOpenCard - открывет карточку товара.
- addCard- добавляет товар в корзину.
- deleteCard - удаляет товар из корзины.
- setPayment - устанавливает способ оплаты заказа.
- setOrder - обновляет значение поля формы заказа.
- validateOrder - проверяет правильность заполнения формы заказа.
- validateContacts - проверяет правильность заполнения контактных данных.
- clearBasket -  очищает массив товаров в корзине.

## Класс  Card:

Предназначен для отображения карточки товара.

Поля:
 - _title — элемент заголовка карточки;
 - _image — атрибут изображения; 
 - _price — атрибут цены товара;
 - _description — атрибут описания товара;
 - _category — атрибут категории товара; 
 - _button — кнопка действия; 
 - _index — индекс товара в корзине.

Свойства класса Card: 
- id — устанавливает идентификатор товара.
- title — устанавливает заголовок товара.
- image — устанавливает изображение товара. 
- price — устанавливает атрибут цены.
- description — устанавливает атрибут описания товара.
- category - устанавливает категорию товара.
- button - устанавливает текст на кнопку.
- index - устанавливает номер по порядку для товаров в корзине.
 
## Класс Contacts:

Предназначен для управления формой контактов пользователя (почта и номер телефон).

Поля:
 - _email — input электронной почты; 
 - _phone — input номера телефона.

 Методы: 
- email — меняет форму поля электронной почты; 
- phone — меняет форму поля номера телефона.

## Класс  LarekApi:

Предназначен для получения списка карточек с сервера и необходимую информацию по каждой карточке, отправляет данные на сервер и возвращает результат в виде объекта.

Методы:

- getCardList - получает список товаров в магазине.
- getCardItem - получает информацию о конкретном товаре.
- orderProduct - отправляет заказ на сервер.

## Класс  Order:

Предназначен для управления формой заказа.

Поля:
 - _buttonCard — кнопка оплаты картой;
 - _buttonCash — кнопка оплаты наличными;
 - _address — атрибут адреса доставки.

 Методы:
- payment - изменяет класс двух элементов интерфейса (this._buttonCard и this._buttonCash) в зависимости от выбранного способа оплаты.
- address - устанавливает значение элемента ввода адреса.

## Класс  Page:

Предназначен для управления страницей.
 
 Поля:
 - counter — атрибут количества товаров в корзине; 
 - catalog — атрибут списка товаров; 
 - _wrapper — элемент главной страницы; 
 - _basket — кнопка открытия корзины.

Методы:
- counter - устанавливает счетчик на иконке корзины.
- catalog - устанавливает каталог товаров.
- locked - блокирует страницу при открытии модального окна.